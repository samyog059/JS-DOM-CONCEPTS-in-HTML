<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Feedback Management Demo</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
	<style>
		:root {
			--bg: #0f172a;
			--panel: #111827;
			--accent: #0ea5e9;
			--accent-2: #f59e0b;
			--text: #e5e7eb;
			--muted: #94a3b8;
			--border: #1f2937;
			--shadow: 0 10px 40px rgba(0, 0, 0, 0.35);
		}

		* { box-sizing: border-box; }
		body {
			margin: 0;
			font-family: 'Space Grotesk', 'Segoe UI', sans-serif;
			background: radial-gradient(circle at 20% 20%, rgba(14, 165, 233, 0.12), transparent 25%),
						radial-gradient(circle at 80% 0%, rgba(245, 158, 11, 0.12), transparent 25%),
						var(--bg);
			color: var(--text);
			min-height: 100vh;
		}

		header {
			padding: 32px 28px 12px;
		}
		.headline {
			display: flex;
			align-items: center;
			gap: 12px;
		}
		.logo-dot {
			width: 42px;
			height: 42px;
			border-radius: 14px;
			background: linear-gradient(135deg, var(--accent), var(--accent-2));
			box-shadow: var(--shadow);
		}
		h1 { margin: 0; letter-spacing: -0.02em; font-size: 28px; }
		p.subtitle { margin: 8px 0 0; color: var(--muted); }

		main {
			padding: 0 28px 36px;
			display: grid;
			grid-template-columns: 420px 1fr;
			gap: 20px;
		}
		@media (max-width: 980px) {
			main { grid-template-columns: 1fr; }
		}

		.card {
			background: var(--panel);
			border: 1px solid var(--border);
			border-radius: 18px;
			padding: 18px 18px 20px;
			box-shadow: var(--shadow);
		}
		.card h2 { margin: 0 0 12px; font-size: 18px; }
		label { display: block; font-size: 13px; color: var(--muted); margin-bottom: 6px; }
		input, select, textarea {
			width: 100%;
			background: #0b1220;
			border: 1px solid var(--border);
			border-radius: 12px;
			padding: 10px 12px;
			color: var(--text);
			font-family: inherit;
			font-size: 14px;
		}
		textarea { resize: vertical; min-height: 80px; }
		.grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
		.grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
		.actions { display: flex; gap: 10px; margin-top: 14px; }
		button {
			border: none;
			border-radius: 12px;
			padding: 11px 14px;
			font-weight: 600;
			cursor: pointer;
			font-family: inherit;
			transition: transform 0.08s ease, box-shadow 0.12s ease;
		}
		button:active { transform: translateY(1px); }
		.primary {
			background: linear-gradient(135deg, var(--accent), #22d3ee);
			color: #0b1220;
			box-shadow: var(--shadow);
		}
		.ghost {
			background: transparent;
			color: var(--muted);
			border: 1px dashed var(--border);
		}

		.badge {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			padding: 4px 10px;
			border-radius: 999px;
			background: #0b1220;
			border: 1px solid var(--border);
			color: var(--text);
			font-size: 12px;
		}
		.badge-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--accent); }
		.badge.warn { border-color: rgba(245, 158, 11, 0.4); color: #fbbf24; }
		.badge.warn .badge-dot { background: #f59e0b; }
		.badge.success { border-color: rgba(34, 197, 94, 0.4); color: #4ade80; }
		.badge.success .badge-dot { background: #22c55e; }

		.stats {
			display: grid;
			grid-template-columns: repeat(4, minmax(0, 1fr));
			gap: 10px;
			margin-bottom: 10px;
		}
		.stat { padding: 14px; border-radius: 14px; background: #0b1220; border: 1px solid var(--border); }
		.stat-title { color: var(--muted); font-size: 12px; margin: 0 0 6px; }
		.stat-value { margin: 0; font-size: 22px; font-weight: 700; }

		.table-wrap { overflow: auto; border-radius: 16px; border: 1px solid var(--border); }
		table { width: 100%; border-collapse: collapse; min-width: 820px; }
		th, td { padding: 12px; text-align: left; font-size: 14px; }
		th { color: var(--muted); background: #0b1220; position: sticky; top: 0; z-index: 1; }
		tbody tr:nth-child(odd) { background: #0c1628; }
		tbody tr:nth-child(even) { background: #0b1220; }
		tbody tr:hover { background: #10203a; }
		.pill { padding: 4px 10px; border-radius: 999px; font-weight: 600; font-size: 12px; }
		.pill-open { background: rgba(245, 158, 11, 0.15); color: #fbbf24; }
		.pill-done { background: rgba(34, 197, 94, 0.18); color: #4ade80; }
		.pill-priority { background: rgba(14, 165, 233, 0.18); color: #7dd3fc; }

		.toolbar { display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap; }
		.toolbar input, .toolbar select { width: auto; min-width: 180px; }
		.small-btn { padding: 7px 10px; border-radius: 10px; font-weight: 600; font-size: 12px; }
		.muted { color: var(--muted); font-size: 13px; }
	</style>
</head>
<body>
	<header>
		<div class="headline">
			<div class="logo-dot"></div>
			<div>
				<h1>Feedback Management</h1>
				<p class="subtitle">Capture, triage, and close the loop with users in a single lightweight panel.</p>
			</div>
		</div>
	</header>

	<main>
		<section class="card" aria-label="Feedback form">
			<h2 id="form-title">Add Feedback</h2>
			<form id="feedback-form">
				<div class="grid-2">
					<div>
						<label for="name">Name</label>
						<input id="name" name="name" placeholder="Jane Doe" required>
					</div>
					<div>
						<label for="email">Email</label>
						<input id="email" name="email" type="email" placeholder="jane@company.com" required>
					</div>
				</div>
				<div class="grid-2" style="margin-top: 10px;">
					<div>
						<label for="product">Product / Area</label>
						<input id="product" name="product" placeholder="Dashboard, Mobile, API..." required>
					</div>
					<div class="grid-3">
						<div>
							<label for="rating">Rating</label>
							<select id="rating" name="rating" required>
								<option value="5">5 - Excellent</option>
								<option value="4">4 - Good</option>
								<option value="3">3 - Fair</option>
								<option value="2">2 - Poor</option>
								<option value="1">1 - Bad</option>
							</select>
						</div>
						<div>
							<label for="priority">Priority</label>
							<select id="priority" name="priority" required>
								<option>Normal</option>
								<option>High</option>
								<option>Low</option>
							</select>
						</div>
						<div>
							<label for="status">Status</label>
							<select id="status" name="status" required>
								<option>Open</option>
								<option>In Progress</option>
								<option>Resolved</option>
							</select>
						</div>
					</div>
				</div>
				<div style="margin-top: 10px;">
					<label for="message">Feedback</label>
					<textarea id="message" name="message" placeholder="What went well? What should improve?" required></textarea>
				</div>
				<div class="actions">
					<button type="submit" class="primary" id="submit-btn">Save Feedback</button>
					<button type="button" class="ghost" id="reset-btn">Reset</button>
				</div>
			</form>
			<p class="muted" style="margin-top: 12px;">All changes are stored locally in your browser for this demo.</p>
		</section>

		<section>
			<div class="stats">
				<div class="stat">
					<p class="stat-title">Total</p>
					<p class="stat-value" id="stat-total">0</p>
				</div>
				<div class="stat">
					<p class="stat-title">Open</p>
					<p class="stat-value" id="stat-open">0</p>
				</div>
				<div class="stat">
					<p class="stat-title">Resolved</p>
					<p class="stat-value" id="stat-resolved">0</p>
				</div>
				<div class="stat">
					<p class="stat-title">Avg Rating</p>
					<p class="stat-value" id="stat-avg">0.0</p>
				</div>
			</div>

			<div class="card" aria-label="Feedback list">
				<div class="toolbar">
					<input id="search" placeholder="Search name, product, or note">
					<select id="filter-status">
						<option value="all">All statuses</option>
						<option value="Open">Open</option>
						<option value="In Progress">In Progress</option>
						<option value="Resolved">Resolved</option>
					</select>
					<select id="sort-by">
						<option value="date-desc">Newest</option>
						<option value="date-asc">Oldest</option>
						<option value="rating-desc">Rating (high to low)</option>
						<option value="rating-asc">Rating (low to high)</option>
					</select>
					<button type="button" class="small-btn ghost" id="seed-btn">Reset demo data</button>
				</div>

				<div class="table-wrap">
					<table>
						<thead>
							<tr>
								<th>Name</th>
								<th>Product</th>
								<th>Rating</th>
								<th>Status</th>
								<th>Priority</th>
								<th>Feedback</th>
								<th>Actions</th>
							</tr>
						</thead>
						<tbody id="table-body"></tbody>
					</table>
				</div>
			</div>
		</section>
	</main>

	<script>
		const storageKey = 'feedback-demo-data';
		const state = { items: [], editingId: null };

		const form = document.getElementById('feedback-form');
		const formTitle = document.getElementById('form-title');
		const submitBtn = document.getElementById('submit-btn');
		const resetBtn = document.getElementById('reset-btn');
		const searchInput = document.getElementById('search');
		const statusFilter = document.getElementById('filter-status');
		const sortSelect = document.getElementById('sort-by');
		const seedBtn = document.getElementById('seed-btn');
		const tableBody = document.getElementById('table-body');

		const statTotal = document.getElementById('stat-total');
		const statOpen = document.getElementById('stat-open');
		const statResolved = document.getElementById('stat-resolved');
		const statAvg = document.getElementById('stat-avg');

		const demoSeed = () => ([
			{
				id: crypto.randomUUID(),
				name: 'Ari Khan',
				email: 'ari@example.com',
				product: 'Dashboard',
				rating: 5,
				priority: 'High',
				status: 'Open',
				message: 'Love the new layout. Would like keyboard shortcuts for switching views.',
				createdAt: Date.now() - 1000 * 60 * 60 * 24 * 1
			},
			{
				id: crypto.randomUUID(),
				name: 'Mara Lee',
				email: 'mara@example.com',
				product: 'Mobile',
				rating: 3,
				priority: 'Normal',
				status: 'In Progress',
				message: 'Offline mode fails after a few minutes. Logs attached in ticket #482.',
				createdAt: Date.now() - 1000 * 60 * 60 * 24 * 4
			},
			{
				id: crypto.randomUUID(),
				name: 'Jon Park',
				email: 'jon@example.com',
				product: 'API',
				rating: 4,
				priority: 'Low',
				status: 'Resolved',
				message: 'Docs are clearer now; pagination examples helped a lot.',
				createdAt: Date.now() - 1000 * 60 * 60 * 24 * 8
			}
		]);

		function load() {
			const saved = localStorage.getItem(storageKey);
			state.items = saved ? JSON.parse(saved) : demoSeed();
		}

		function persist() {
			localStorage.setItem(storageKey, JSON.stringify(state.items));
		}

		function resetForm() {
			form.reset();
			state.editingId = null;
			formTitle.textContent = 'Add Feedback';
			submitBtn.textContent = 'Save Feedback';
		}

		function upsertFeedback(entry) {
			if (state.editingId) {
				state.items = state.items.map(item => item.id === state.editingId ? { ...entry, id: state.editingId, createdAt: item.createdAt } : item);
			} else {
				state.items.unshift({ ...entry, id: crypto.randomUUID(), createdAt: Date.now() });
			}
			persist();
			render();
			resetForm();
		}

		function deleteFeedback(id) {
			state.items = state.items.filter(item => item.id !== id);
			persist();
			render();
		}

		function toggleStatus(id) {
			state.items = state.items.map(item => item.id === id ? { ...item, status: item.status === 'Resolved' ? 'Open' : 'Resolved' } : item);
			persist();
			render();
		}

		function startEdit(id) {
			const item = state.items.find(i => i.id === id);
			if (!item) return;
			state.editingId = id;
			formTitle.textContent = 'Edit Feedback';
			submitBtn.textContent = 'Update Feedback';
			form.name.value = item.name;
			form.email.value = item.email;
			form.product.value = item.product;
			form.rating.value = item.rating;
			form.priority.value = item.priority;
			form.status.value = item.status;
			form.message.value = item.message;
			form.scrollIntoView({ behavior: 'smooth', block: 'start' });
		}

		function filterAndSortItems() {
			const query = searchInput.value.trim().toLowerCase();
			const statusVal = statusFilter.value;
			const sortVal = sortSelect.value;

			let list = state.items.filter(item => {
				const matchesQuery = [item.name, item.product, item.message].some(field => field.toLowerCase().includes(query));
				const matchesStatus = statusVal === 'all' || item.status === statusVal;
				return matchesQuery && matchesStatus;
			});

			list.sort((a, b) => {
				if (sortVal === 'date-desc') return b.createdAt - a.createdAt;
				if (sortVal === 'date-asc') return a.createdAt - b.createdAt;
				if (sortVal === 'rating-desc') return b.rating - a.rating;
				if (sortVal === 'rating-asc') return a.rating - b.rating;
				return 0;
			});
			return list;
		}

		function renderStats() {
			const total = state.items.length;
			const open = state.items.filter(i => i.status !== 'Resolved').length;
			const resolved = state.items.filter(i => i.status === 'Resolved').length;
			const avg = total ? (state.items.reduce((sum, i) => sum + Number(i.rating), 0) / total).toFixed(1) : '0.0';

			statTotal.textContent = total;
			statOpen.textContent = open;
			statResolved.textContent = resolved;
			statAvg.textContent = avg;
		}

		function renderTable(list) {
			tableBody.innerHTML = '';
			if (!list.length) {
				tableBody.innerHTML = '<tr><td colspan="7" class="muted">No feedback matches the filters.</td></tr>';
				return;
			}

			list.forEach(item => {
				const tr = document.createElement('tr');
				tr.innerHTML = `
					<td>
						<div>${item.name}</div>
						<div class="muted" style="font-size:12px;">${item.email}</div>
					</td>
					<td>${item.product}</td>
					<td><span class="pill pill-priority">${item.rating} / 5</span></td>
					<td><span class="pill ${item.status === 'Resolved' ? 'pill-done' : 'pill-open'}">${item.status}</span></td>
					<td>${item.priority}</td>
					<td>${item.message}</td>
					<td>
						<button class="small-btn primary" data-action="edit" data-id="${item.id}">Edit</button>
						<button class="small-btn ghost" data-action="toggle" data-id="${item.id}">${item.status === 'Resolved' ? 'Reopen' : 'Resolve'}</button>
						<button class="small-btn ghost" data-action="delete" data-id="${item.id}">Delete</button>
					</td>
				`;
				tableBody.appendChild(tr);
			});
		}

		function render() {
			renderStats();
			renderTable(filterAndSortItems());
		}

		form.addEventListener('submit', (e) => {
			e.preventDefault();
			const data = new FormData(form);
			const entry = {
				name: data.get('name').trim(),
				email: data.get('email').trim(),
				product: data.get('product').trim(),
				rating: Number(data.get('rating')),
				priority: data.get('priority'),
				status: data.get('status'),
				message: data.get('message').trim()
			};
			upsertFeedback(entry);
		});

		resetBtn.addEventListener('click', resetForm);

		searchInput.addEventListener('input', render);
		statusFilter.addEventListener('change', render);
		sortSelect.addEventListener('change', render);

		seedBtn.addEventListener('click', () => {
			state.items = demoSeed();
			persist();
			render();
			resetForm();
		});

		tableBody.addEventListener('click', (e) => {
			const btn = e.target.closest('button[data-action]');
			if (!btn) return;
			const { action, id } = btn.dataset;
			if (action === 'edit') return startEdit(id);
			if (action === 'toggle') return toggleStatus(id);
			if (action === 'delete') {
				if (confirm('Delete this feedback?')) deleteFeedback(id);
			}
		});

		load();
		render();
	</script>
</body>
</html>
